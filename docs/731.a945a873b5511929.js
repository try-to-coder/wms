"use strict";(self.webpackChunkwms_web_alstom=self.webpackChunkwms_web_alstom||[]).push([[731],{9731:(q,L,m)=>{m.r(L),m.d(L,{CargoInwardModule:()=>vt});var g=m(6814),Z=m(2253),t=m(4946);let D=(()=>{class a{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-cargo-inward"]],decls:1,vars:0,template:function(i,n){1&i&&t._UZ(0,"router-outlet")},dependencies:[Z.lC]})}return a})();var A=m(7394),c=m(2962),u=m(2553),d=m(3251),h=m(6551),_=m(8273);let p=(()=>{class a{constructor(e){this.apiHandler=e}getCargoList(e,i){return this.apiHandler.getRequest(`cargo/list/${e}/${i}`,null,"dispatch master : list")}getCargoDetail(e,i){return this.apiHandler.getRequest(`cargo/${e}/${i}`,null,"dispatch master : list")}importCargoList(e){return this.apiHandler.postRequest("cargo/",e,"dispatch master : cargo list")}inwardCargoList(e){return this.apiHandler.putRequest("cargo/inward/",e,"dispatch master : cargo list")}outwardCargoList(e){return this.apiHandler.putRequest("cargo/outward/",e,"dispatch master : cargo list")}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(_.k))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var b=m(6815),v=m(6223);function x(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",27),t._UZ(1,"span",28),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHtml",e.invalidBillMessage||"",t.oJD)}}function C(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",27),t._UZ(1,"span",28),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHtml",e.invalidItemBarcodeMessage||"",t.oJD)}}function O(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"span",33),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"span",33),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"span",33),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"span",33),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"span",33),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"span",33),t.qZA(),t.TgZ(13,"td")(14,"a",34),t.NdJ("click",function(){const n=t.CHM(e),o=n.$implicit,r=n.index,l=t.oxw(2);return t.KtG(l.onDeleteScanItem(o,r))}),t.O4$(),t.TgZ(15,"svg",35),t._UZ(16,"path",18)(17,"line",36)(18,"line",37)(19,"line",38)(20,"path",39)(21,"path",40),t.qZA()()()()}if(2&a){const e=s.$implicit;t.xp6(2),t.Q6J("innerHtml",e.AWB_NO||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.HAWB_NO||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_PKGS||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_WGHT||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.COMM_DESC||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.Barcode||"",t.oJD)}}function y(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"table")(4,"thead")(5,"tr")(6,"th"),t._uU(7,"AWB NO"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"HAWB NO"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"MFST PKGS"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"MFST WGHT"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"COMM DESC"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Barcode"),t.qZA(),t._UZ(18,"th"),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,O,22,6,"tr",32),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.scannedList)}}let J=(()=>{class a{constructor(e,i,n,o,r,l){this.route=e,this.log=i,this.alert=n,this.credential=o,this.cargoApi=r,this.utility=l,this.employeeCode="",this.billNo="",this.itemBarcode="",this.invalidBillMessage="",this.invalidItemBarcodeMessage="",this.filterDate={},this.subscription=new A.w0,this.productList=[],this.filteredList=[],this.scannedList=[],this.modalDisplayList=[],this.outwardLoader=!1,this.onPreInit()}onPreInit(){}ngOnInit(){this.employeeCode=this.credential.getLoginCredentials("Employee_Code"),this.filterDate=this.utility.getDateList(c.Q.dateOption.thisMonth),this.getImportedList()}getImportedList(){this.subscription.add(this.cargoApi.getCargoList(this.filterDate.fromDate,this.filterDate.toDate).subscribe({next:e=>{const i=(e||[]).filter(n=>n.Barcode&&!n.Outward_By);this.productList=i,this.log.log("inward list : ",this.productList)},error:e=>{this.log.error(e,"manual-inward-scan","getImportedList")}}))}onBillNoScan(e,i){this.invalidBillMessage="";const n=(e=e||window.event).keyCode;if(this.log.log("keyCode : ",n),13===n){let o=i?.trim();this.log.log("searchKey : "+o);const r=this.productList.filter(l=>l.AWB_NO===o&&!l.isScanned).map(l=>l.Barcode);if(!r?.length)return this.log.log("Invalid bill number"),void(this.invalidBillMessage="Invalid Bill Number");this.filteredList=r||[],this.log.log("filteredList : ",this.filteredList),document.getElementById("bill-no-scan-field")?.focus()}}onBarcodeScan(e,i){this.invalidItemBarcodeMessage="";const n=(e=e||window.event).keyCode;if(this.log.log("keyCode : ",n),13===n){let o=i?.trim();if(this.log.log("searchKey : "+o),this.scannedList.find(f=>f.Barcode===o))return this.log.log("Barcode already exist"),void(this.invalidItemBarcodeMessage="Item already scanned");if(!this.filteredList.find(f=>f===o))return this.log.log("Invalid barcode"),void(this.invalidItemBarcodeMessage="Invalid Barcode");const T=this.productList.find(f=>f.AWB_NO===this.billNo&&f.Barcode===o&&!f.isScanned);if(!T)return this.log.log("Invalid barcode"),void(this.invalidItemBarcodeMessage="Invalid Barcode");T.isScanned=!0,this.scannedList.push(T),this.reset()}}reset(){this.modalDisplayList=[],this.itemBarcode="",this.log.log("product list : ",this.productList," filter list : ",this.filteredList)}onSaveOutward(){if(this.log.log("outward list : ",this.scannedList),!this.scannedList?.length)return void this.alert.toastAlert("warning","Scan minimum one product to save");this.outwardLoader=!0;const e=[];this.scannedList.forEach(i=>{e.push({AWB_NO:i.AWB_NO,HAWB_NO:i.HAWB_NO,Barcode:i.Barcode,Outward_By:this.employeeCode})}),this.subscription.add(this.cargoApi.outwardCargoList(e).subscribe({next:i=>{this.log.log("save in ward list response : ",i),i&&this.alert.showMixinAlert("Data outward successfully !!!",null,"/cargo-outward");const n=setTimeout(()=>{this.outwardLoader=!1,clearTimeout(n)},1e3)},error:i=>{this.log.error(i,"manual-inward-scan","onSaveInward");const n=setTimeout(()=>{this.outwardLoader=!1,clearTimeout(n)},1e3)}}))}ngOnDestroy(){this.subscription?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(Z.F0),t.Y36(u.$),t.Y36(d.c),t.Y36(h.T),t.Y36(p),t.Y36(b.t))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-cargo-outward-scan"]],decls:43,vars:12,consts:[[1,"breadcrumb-container"],[1,"breadcrumb-bar"],["aria-label","breadcrumb ",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb","mb-0"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"aside-container"],[1,"all-button","me-3",3,"click"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"document-main-container"],[1,"form-container"],[1,"row","justify-content-center","mt-5"],[1,"col-12","col-md-8"],[1,"input-field-group"],["type","text","placeholder","Scan bill no",1,"form-control",3,"ngModel","ngModelChange","keyup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-scan"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M4 7v-1a2 2 0 0 1 2 -2h2"],["d","M4 17v1a2 2 0 0 0 2 2h2"],["d","M16 4h2a2 2 0 0 1 2 2v1"],["d","M16 20h2a2 2 0 0 0 2 -2v-1"],["x1","5","y1","12","x2","19","y2","12"],["class","invalid-field-container",4,"ngIf"],["id","bill-no-scan-field","type","text","placeholder","Scan item here",1,"form-control",3,"ngModel","ngModelChange","keyup"],["class","row mt-5",4,"ngIf"],[1,"invalid-field-container"],[1,"text-danger",3,"innerHtml"],[1,"row","mt-5"],[1,"col-md-12"],[1,"total-table-container"],[4,"ngFor","ngForOf"],[3,"innerHtml"],[1,"action-icon-button","delete-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-trash"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),t._uU(6,"Outward"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Scan"),t.qZA()()()(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return n.onSaveOutward()}),t.TgZ(11,"span"),t._uU(12,"Save"),t.qZA(),t.TgZ(13,"div",9)(14,"span",10),t._uU(15,"Loading..."),t.qZA()()()()(),t.TgZ(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"input",16),t.NdJ("ngModelChange",function(r){return n.billNo=r})("keyup",function(r){return n.onBillNoScan(r,n.billNo)}),t.qZA(),t.O4$(),t.TgZ(22,"svg",17),t._UZ(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21)(27,"path",22)(28,"line",23),t.qZA()(),t.YNc(29,x,2,1,"div",24),t.qZA()(),t.kcU(),t.TgZ(30,"div",13)(31,"div",14)(32,"div",15)(33,"input",25),t.NdJ("ngModelChange",function(r){return n.itemBarcode=r})("keyup",function(r){return n.onBarcodeScan(r,n.itemBarcode)}),t.qZA(),t.O4$(),t.TgZ(34,"svg",17),t._UZ(35,"path",18)(36,"path",19)(37,"path",20)(38,"path",21)(39,"path",22)(40,"line",23),t.qZA()(),t.YNc(41,C,2,1,"div",24),t.qZA()(),t.YNc(42,y,21,1,"div",26),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("routerLink","/cargo-inward"),t.xp6(5),t.ekj("loader",n.outwardLoader),t.xp6(10),t.ekj("invalid",n.invalidBillMessage),t.xp6(1),t.Q6J("ngModel",n.billNo),t.xp6(8),t.Q6J("ngIf",n.invalidBillMessage),t.xp6(3),t.ekj("invalid",n.invalidItemBarcodeMessage),t.xp6(1),t.Q6J("ngModel",n.itemBarcode),t.xp6(8),t.Q6J("ngIf",n.invalidItemBarcodeMessage),t.xp6(1),t.Q6J("ngIf",null==n.scannedList?null:n.scannedList.length))},dependencies:[g.sg,g.O5,Z.rH,v.Fj,v.JJ,v.On],styles:[".input-field-group[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;margin:0 2rem;padding:0 1rem;box-shadow:0 2px 8px #22292f24;border-radius:.3rem}.input-field-group.invalid[_ngcontent-%COMP%]{box-shadow:0 0 4px 0 rgba(var(--bs-danger-rgb),.5)}.input-field-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none}.input-field-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.invalid-field-container[_ngcontent-%COMP%]{padding-top:.75rem;text-align:center}"]})}return a})();var N=m(1486);function B(a,s){if(1&a&&(t.TgZ(0,"div",27),t._UZ(1,"span",28),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHtml","* "+e.excelStatus,t.oJD)}}const F=function(a){return{"button-loader-right":a}};function E(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.validateExcel())}),t.TgZ(3,"span"),t._uU(4,"Validate"),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(2,F,e.validationLoader)),t.xp6(1),t.Q6J("disabled",!e.isValidExcel)}}function Q(a,s){if(1&a&&(t.TgZ(0,"th"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&a){const e=s.$implicit,i=t.oxw(6);t.xp6(2),t.hij("",i.removeUS(e.key)," ")}}function H(a,s){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,Q,3,1,"th",37),t.ALo(2,"keyvalue"),t.qZA()),2&a){const e=s.$implicit,i=t.oxw(5);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e,i.originalOrder))}}function Y(a,s){if(1&a&&(t.TgZ(0,"td"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&a){const e=s.$implicit;t.xp6(2),t.Oqu(e.value)}}function P(a,s){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,Y,3,1,"td",37),t.ALo(2,"keyvalue"),t.qZA()),2&a){const e=s.$implicit,i=t.oxw(6);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e,i.originalOrder))}}function W(a,s){if(1&a&&(t.TgZ(0,"tbody"),t.YNc(1,P,3,4,"tr",37),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.data)}}function R(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"table",44)(2,"thead",45),t.YNc(3,H,3,4,"tr",37),t.ALo(4,"slice"),t.qZA(),t.YNc(5,W,2,1,"tbody",43),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,2,e.data,0,1)),t.xp6(2),t.Q6J("ngIf",0!=(null==e.data?null:e.data.length))}}function G(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",38)(2,"a",39),t.NdJ("click",function(){const n=t.CHM(e),o=n.index,r=n.$implicit,l=t.oxw(3);return t.KtG(l.validInfoExpand(o,null==r.data?null:r.data.length))}),t.TgZ(3,"span",40),t._uU(4),t.qZA(),t.TgZ(5,"span",41),t._uU(6),t.qZA()(),t.TgZ(7,"div",42),t.YNc(8,R,6,6,"ng-container",43),t.qZA()(),t.BQk()}if(2&a){const e=s.$implicit,i=s.index;t.xp6(2),t.ekj("error","error"===e.status),t.xp6(2),t.hij("",e.status," "),t.xp6(2),t.Oqu(e.message),t.xp6(1),t.MGl("id","validate-",i,"-info-expand"),t.xp6(1),t.Q6J("ngIf",null==e.data?null:e.data.length)}}function j(a,s){if(1&a&&(t.TgZ(0,"div",36),t.YNc(1,G,9,6,"ng-container",37),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.validationReportList)}}function V(a,s){if(1&a&&(t.TgZ(0,"div",46)(1,"div",47)(2,"span",48),t._uU(3,"Your Excel file ready to upload"),t.qZA(),t._UZ(4,"span",49),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("innerHtml","No of GRN : "+e.importDataList.length,t.oJD)}}function K(a,s){if(1&a&&(t.TgZ(0,"a",54)(1,"span",40),t._uU(2,"Success"),t.qZA(),t._UZ(3,"span",55),t.qZA()),2&a){const e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",e.successCount+" GRN imported successfully !!!",t.oJD)}}function X(a,s){if(1&a&&(t.TgZ(0,"a",56)(1,"span",40),t._uU(2,"Error "),t.qZA(),t._UZ(3,"span",55),t.qZA()),2&a){const e=s.$implicit;t.xp6(3),t.Q6J("innerHtml",e||"",t.oJD)}}function z(a,s){if(1&a&&(t.TgZ(0,"div",50)(1,"div",51),t.YNc(2,K,4,1,"a",52),t.YNc(3,X,4,1,"a",53),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.successCount),t.xp6(1),t.Q6J("ngForOf",e.uploadErrorList)}}function tt(a,s){if(1&a&&(t.TgZ(0,"div",32),t.YNc(1,j,2,1,"div",33),t.YNc(2,V,5,1,"div",34),t.YNc(3,z,4,2,"div",35),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.validationErrorCount>0),t.xp6(1),t.Q6J("ngIf",e.isValidateSuccess),t.xp6(1),t.Q6J("ngIf",e.importResponseCompleted)}}function et(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onImport())}),t.TgZ(2,"span"),t._uU(3,"Import"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.uploadInitiated)}}let nt=(()=>{class a{constructor(e,i,n,o,r){this.log=e,this.route=i,this.cargoApi=n,this.alert=o,this.utility=r,this.uploadInitiated=!1,this.importDataList=[],this.validationReportList=[],this.isValidExcel=!1,this.excelStatus="",this.EXCEL_MAX_LIMIT=1e3,this.isValidateCompleted=!1,this.isValidateSuccess=!1,this.validationLoader=!1,this.validationErrorCount=0,this.subscription=new A.w0}ngOnInit(){}onFileChoose(e){const i=e.target.files[0];if(i){const n=new FileReader;n.readAsArrayBuffer(i),n.onload=r=>{const T=new Uint8Array(n.result),f=new Array;for(let k=0;k!==T.length;++k)f[k]=String.fromCharCode(T[k]);const M=f.join(""),I=N.ij(M,{type:"binary"});this.importDataList=N.P6.sheet_to_json(I.Sheets[(I.SheetNames||[])[0]],{raw:!0}),this.log.log("Obtained data from excel",this.importDataList),this.checkExcelStatus()};const o=$("#chooseFile").val();o&&(/^\s*$/.test(o.toString())?($(".file-upload").removeClass("active"),$("#selected-file-name").text("No file chosen...")):($(".file-upload").addClass("active"),$("#selected-file-name").text(o.toString().replace("C:\\fakepath\\","")))),e.target.value=""}}checkExcelStatus(){this.isValidExcel=!1,this.importDataList.length?this.importDataList.length>this.EXCEL_MAX_LIMIT?this.excelStatus="Exceeds maximum upload limit ("+this.EXCEL_MAX_LIMIT+")":this.importDataList.find(i=>!i.IGM_NO&&!i.AWB_NO&&!i.HAWB_NO)?this.excelStatus="Mandatory fields are missing":this.isValidExcel=!0:this.excelStatus="Excel does not contain any data"}validateExcel(){this.isValidateSuccess=!1,this.isValidateCompleted=!1,this.validationReportList=[],this.validationErrorCount=0,this.importDataList&&this.importDataList.length&&(this.validationLoader=!0,this.excelValidation())}excelValidation(){const e=[],i=[],n=[],o=[{name:"IGM_NO",length:7},{name:"IGM_YR",length:4},{name:"AWB_NO",length:20},{name:"HAWB_NO",length:20},{name:"MFST_PKGS",length:8},{name:"MFST_WGHT",length:12},{name:"COMM_DESC",length:30}];this.importDataList.forEach((l,T)=>{const f={AWB_NO:l.AWB_NO||"",HAWB_NO:l.HAWB_NO||""};l.AWB_NO&&l.HAWB_NO&&n.find(S=>""===S.AWB_NO&&""==S.HAWB_NO)?e.push(f):o.length&&o.forEach(w=>{l[w.name]?.length>w.length&&i.push({Row:T+1,Column:w.name,Value:l[w.name]})})}),e?.length&&(this.validationErrorCount++,this.validationReportList.push({status:"error",message:e?.length+"Bill no and HAWB_NOs are duplicated",data:e})),i?.length&&(this.validationErrorCount++,this.validationReportList.push({status:"error",message:i.length+" field(s) exceeding maximum lengths!",data:i}));const r=setTimeout(()=>{this.validationLoader=!1,this.validationReportList?.length||(this.isValidateSuccess=!0),this.isValidateCompleted=!0,clearTimeout(r)},1e3)}clearExcel(){$(".file-upload").removeClass("active"),$("#selected-file-name").text("No file chosen..."),this.importDataList=[],this.validationReportList=[],this.isValidExcel=!1,this.excelStatus="",this.refresh()}onImport(){this.uploadInitiated=!0,this.subscription.add(this.cargoApi.importCargoList(this.importDataList).subscribe({next:e=>{this.log.log("cargo response : ",e),e&&this.alert.showMixinAlert("Data imported successfully !!!",null,"/cargo-inward")},error:e=>{this.log.error(e,"manual-inward-import","onImport")}}))}refresh(){this.uploadInitiated=!1}ngOnDestroy(){this.subscription?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(u.$),t.Y36(Z.F0),t.Y36(p),t.Y36(d.c),t.Y36(b.t))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-manual-inward-import"]],decls:34,vars:7,consts:[[1,"breadcrumb-container"],[1,"breadcrumb-bar"],["aria-label","breadcrumb ",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb","mb-0"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"aside-container"],[1,"document-main-container"],[1,"form-container"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"import-container","all-default-card"],[1,"upload-container"],["for","chooseFile",1,"choose-label-tag"],[1,"icon"],[1,"fas","fa-cloud-upload-alt"],["id","fileName",1,"file-select-button"],[1,"selected-file-container"],[1,"selected-file-content"],["id","selected-file-name",1,"file-select-name"],[3,"click"],[1,"far","fa-times-circle","ms-2"],["type","file","name","chooseFile","id","chooseFile","accept",".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"display-none",3,"change"],["class","invalid-info",4,"ngIf"],["class","button-container",4,"ngIf"],["class","validate-data-container",4,"ngIf"],[1,"invalid-info"],[3,"innerHtml"],[1,"button-container"],[1,"form-button-container",3,"ngClass"],[1,"all-button","outline",3,"disabled","click"],[1,"validate-data-container"],["class","validate-content  all-default-card",4,"ngIf"],["class","success-container all-default-card",4,"ngIf"],["class","after-import-container all-default-card",4,"ngIf"],[1,"validate-content","all-default-card"],[4,"ngFor","ngForOf"],[1,"w-100"],[1,"header",3,"click"],[1,"header-label"],[1,"message-label"],[1,"validate-info-detail","display-none",3,"id"],[4,"ngIf"],[1,"info-table"],[1,"thead-dark"],[1,"success-container","all-default-card"],[1,"text-center"],[1,"d-block","text-success"],[1,"count-section",3,"innerHtml"],[1,"after-import-container","all-default-card"],[1,"after-import-content"],["class","header",4,"ngIf"],["class","header error",4,"ngFor","ngForOf"],[1,"header"],[1,"message-label",3,"innerHtml"],[1,"header","error"],[1,"all-button",3,"disabled","click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),t._uU(6,"Inward"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Import"),t.qZA()()()(),t._UZ(9,"div",7),t.qZA(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"label",14)(17,"span",15),t._UZ(18,"i",16),t.qZA(),t.TgZ(19,"span",17),t._uU(20,"Choose file to upload"),t.qZA()(),t.TgZ(21,"div",18)(22,"div",19)(23,"span",20),t._uU(24,"No file chosen..."),t.qZA(),t.TgZ(25,"span",15)(26,"a",21),t.NdJ("click",function(){return n.clearExcel()}),t._uU(27,"Clear "),t._UZ(28,"i",22),t.qZA()()()(),t.TgZ(29,"input",23),t.NdJ("change",function(r){return n.onFileChoose(r)}),t.qZA(),t.YNc(30,B,2,1,"div",24),t.YNc(31,E,5,4,"div",25),t.qZA()(),t.YNc(32,tt,4,3,"div",26),t.YNc(33,et,4,1,"div",25),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("routerLink","/cargo-inward"),t.xp6(16),t.ekj("d-block",!n.uploadInitiated&&(null==n.importDataList?null:n.importDataList.length)),t.xp6(9),t.Q6J("ngIf",!n.isValidExcel&&n.excelStatus),t.xp6(1),t.Q6J("ngIf",!n.excelStatus&&!n.uploadInitiated&&(null==n.importDataList?null:n.importDataList.length)),t.xp6(1),t.Q6J("ngIf",n.isValidateCompleted),t.xp6(1),t.Q6J("ngIf",n.isValidateSuccess))},dependencies:[g.mk,g.sg,g.O5,Z.rH,g.OU,g.Nd],styles:[".selected-file-content[_ngcontent-%COMP%]{background:#f4f4f4!important}"]})}return a})();var U=m(627),it=m(8645),at=m(3359);function ot(a,s){if(1&a&&(t.TgZ(0,"th"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&a){const e=s.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.removeUS(e.key))}}function rt(a,s){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,ot,3,1,"th",16),t.ALo(2,"keyvalue"),t.qZA()),2&a){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e,i.originalOrder))}}function st(a,s){if(1&a&&(t.TgZ(0,"td"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&a){const e=s.$implicit;t.xp6(2),t.Oqu(e.value)}}function lt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr",19),t.NdJ("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onTableRowClick(o))}),t.YNc(1,st,3,1,"td",16),t.ALo(2,"keyvalue"),t.qZA()}if(2&a){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e,i.originalOrder))}}function dt(a,s){1&a&&(t.TgZ(0,"div",20)(1,"div",21),t._UZ(2,"img",22),t.qZA()())}function ut(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",43),t._UZ(1,"span",44),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHtml",e.invalidBillMessage||"",t.oJD)}}function pt(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",43),t._UZ(1,"span",44),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHtml",e.invalidItemBarcodeMessage||"",t.oJD)}}function gt(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"span",47),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"span",47),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"span",47),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"span",47),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"span",47),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"span",47),t.qZA(),t.TgZ(13,"td")(14,"a",48),t.NdJ("click",function(){const n=t.CHM(e),o=n.$implicit,r=n.index,l=t.oxw(2);return t.KtG(l.onDeleteScanItem(o,r))}),t.O4$(),t.TgZ(15,"svg",49),t._UZ(16,"path",18)(17,"line",50)(18,"line",51)(19,"line",52)(20,"path",53)(21,"path",54),t.qZA()()()()}if(2&a){const e=s.$implicit;t.xp6(2),t.Q6J("innerHtml",e.AWB_NO||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.HAWB_NO||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_PKGS||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_WGHT||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.COMM_DESC||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.Barcode||"",t.oJD)}}function mt(a,s){if(1&a&&(t.O4$(),t.kcU(),t.TgZ(0,"div",45)(1,"div",36)(2,"div",46)(3,"table")(4,"thead")(5,"tr")(6,"th"),t._uU(7,"AWB NO"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"HAWB NO"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"MFST PKGS"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"MFST WGHT"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"COMM DESC"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Barcode"),t.qZA(),t._UZ(18,"th"),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,gt,22,6,"tr",39),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.scannedList)}}function ht(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",55),t.NdJ("click",function(){const o=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onProductSelect(o))}),t.TgZ(2,"td"),t._UZ(3,"span",47),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"span",47),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"span",47),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"span",47),t.qZA()(),t.TgZ(10,"tr",56),t._UZ(11,"td",57),t.qZA(),t.BQk()}if(2&a){const e=s.$implicit;t.xp6(3),t.Q6J("innerHtml",e.HAWB_NO||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_PKGS||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.MFST_WGHT||"",t.oJD),t.xp6(2),t.Q6J("innerHtml",e.COMM_DESC||"",t.oJD)}}const ft=[{path:"",component:D,children:[{path:"",component:(()=>{class a{constructor(e,i,n,o,r,l){this.route=e,this.log=i,this.alert=n,this.cargoApi=o,this.dataTable=r,this.utility=l,this.dtOptions={},this.dtTrigger=new it.x,this.subscription=new A.w0,this.tableList=[],this.isTableDataRetrieved=!1,this.originalOrder=(T,f)=>0,this.onPreInit()}onPreInit(){}ngOnInit(){this.getBasicUtility(),this.getInwardList()}getInwardList(e=!1){this.subscription.add(this.cargoApi.getCargoList(this.filterDate.fromDate,this.filterDate.toDate).subscribe({next:i=>{this.setInwardList(i||[],e);const o=setTimeout(()=>{this.isTableDataRetrieved=!0,clearTimeout(o)},c.Q.tableLoaderDuration)},error:i=>{this.log.error(i,"manual-inward-list","getInwardList")}}))}setInwardList(e=[],i=!1){if(this.tableList=[],e.length)if(this.tableList=e,i)this.reRender();else if(this.dtTrigger.next(),!jQuery("table").parents(".dataTables_scroll").length){const n=setTimeout(()=>{jQuery("table").wrap('<div class="dataTables_scroll" />'),clearTimeout(n)},100)}}reRender(){if(this.dtElement.dtInstance)this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next();const i=setTimeout(()=>{jQuery("table").wrap('<div class="dataTables_scroll" />'),clearTimeout(i)},100)});else if(this.dtTrigger.next(),!jQuery("table").parents(".dataTables_scroll").length){const e=setTimeout(()=>{jQuery("table").wrap('<div class="dataTables_scroll" />'),clearTimeout(e)},100)}}onInward(){this.route.navigateByUrl("/cargo-inward/scan")}onOutward(){this.route.navigateByUrl("/cargo-inward/outward")}onImport(){this.route.navigateByUrl("/cargo-inward/import")}removeUS(e){return e.replace(/_/g," ")}getBasicUtility(){this.dtOptions=this.dataTable.getDataTableOptions(!1),this.filterDate=this.utility.getDateList(c.Q.dateOption.thisMonth)}ngOnDestroy(){}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(Z.F0),t.Y36(u.$),t.Y36(d.c),t.Y36(p),t.Y36(at.n),t.Y36(b.t))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-manual-inward-list"]],viewQuery:function(i,n){if(1&i&&t.Gf(U.G,5),2&i){let o;t.iGM(o=t.CRH())&&(n.dtElement=o.first)}},decls:30,vars:13,consts:[[1,"breadcrumb-container"],[1,"breadcrumb-bar"],["aria-label","breadcrumb ",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb","mb-0"],["aria-current","page",1,"breadcrumb-item","active"],[1,"aside-container","d-flex"],[1,"all-button","me-3",3,"click"],[1,"all-button","outline",3,"click"],[1,"document-main-container"],[1,"form-container"],[1,"row"],[1,"col-md-12"],[1,"data-table-scroll-container"],[1,"table-spinner-container"],["role","status",1,"spinner-border","text-success"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["class","no-record-found-container",4,"ngIf"],[3,"click"],[1,"no-record-found-container"],[1,"no-record-found-img-div"],["src","../../../assets/images/no-data-found.png","alt","No data found","title","No data found"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4),t._uU(5,"Inward"),t.qZA()()()(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.onOutward()}),t.TgZ(8,"span"),t._uU(9,"Outward"),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return n.onInward()}),t.TgZ(11,"span"),t._uU(12,"Inward"),t.qZA()(),t.TgZ(13,"button",7),t.NdJ("click",function(){return n.onImport()}),t.TgZ(14,"span"),t._uU(15,"Import"),t.qZA()()()(),t.TgZ(16,"div",8)(17,"div",9)(18,"div",10)(19,"div",11)(20,"div",12)(21,"div",13),t._UZ(22,"div",14),t.qZA(),t.TgZ(23,"table",15)(24,"thead"),t.YNc(25,rt,3,4,"tr",16),t.ALo(26,"slice"),t.qZA(),t.TgZ(27,"tbody"),t.YNc(28,lt,3,4,"tr",17),t.qZA()()(),t.YNc(29,dt,3,0,"div",18),t.qZA()()()()),2&i&&(t.xp6(20),t.ekj("table-spinner",!n.isTableDataRetrieved)("hide-when-no-data",0==(null==n.tableList?null:n.tableList.length)),t.xp6(3),t.Q6J("dtOptions",n.dtOptions)("dtTrigger",n.dtTrigger),t.xp6(2),t.Q6J("ngForOf",t.Dn7(26,9,n.tableList,0,1)),t.xp6(3),t.Q6J("ngForOf",n.tableList),t.xp6(1),t.Q6J("ngIf",0==(null==n.tableList?null:n.tableList.length)&&n.isTableDataRetrieved))},dependencies:[g.sg,g.O5,U.G,g.OU,g.Nd]})}return a})()},{path:"import",component:nt},{path:"scan",component:(()=>{class a{constructor(e,i,n,o,r,l){this.route=e,this.log=i,this.alert=n,this.credential=o,this.cargoApi=r,this.utility=l,this.employeeCode="",this.billNo="",this.itemBarcode="",this.invalidBillMessage="",this.invalidItemBarcodeMessage="",this.filterDate={},this.subscription=new A.w0,this.productList=[],this.filteredList=[],this.scannedList=[],this.modalDisplayList=[],this.inwardLoader=!1,this.onPreInit()}onPreInit(){}ngOnInit(){this.employeeCode=this.credential.getLoginCredentials("Employee_Code"),this.filterDate=this.utility.getDateList(c.Q.dateOption.thisMonth),this.getImportedList()}getImportedList(){this.subscription.add(this.cargoApi.getCargoList(this.filterDate.fromDate,this.filterDate.toDate).subscribe({next:e=>{this.log.log("imported barcode list : ",e);const i=(e||[]).filter(n=>!n.Barcode);this.productList=i},error:e=>{this.log.error(e,"manual-inward-scan","getImportedList")}}))}onBillNoScan(e,i){this.invalidBillMessage="";const n=(e=e||window.event).keyCode;if(this.log.log("keyCode : ",n),13===n){let o=i?.trim();this.log.log("searchKey : "+o);const r=this.productList.filter(l=>l.AWB_NO===o&&!l.isScanned).map(l=>l.HAWB_NO);if(!r?.length)return this.log.log("Invalid bill number"),void(this.invalidBillMessage="Invalid Bill Number");this.filteredList=r||[],this.log.log("filteredList : ",this.filteredList),document.getElementById("bill-no-scan-field")?.focus()}}onBarcodeScan(e,i){this.invalidItemBarcodeMessage="";const n=(e=e||window.event).keyCode;if(this.log.log("keyCode : ",n),13===n){let o=i?.trim();if(this.log.log("searchKey : "+o),this.scannedList.find(f=>f.Barcode===o))return this.log.log("Barcode already exist"),this.alert.toastAlert("warning","Item already scanned"),void(this.invalidItemBarcodeMessage="Item already scanned");const l=this.filteredList.filter(f=>this.isBarcodeValid(f,o));this.log.log("filter list : ",l);const T=l?.length;if(!T)return this.log.log("Invalid barcode"),void(this.invalidItemBarcodeMessage="Invalid Barcode");if(T>1){const f=[];l.forEach(M=>{const I=this.productList.findIndex(w=>w.AWB_NO===this.billNo&&w.HAWB_NO===M&&!w.isScanned);if(-1!==I){const w=this.productList[I]||{};w.Index=I,f.push(w)}}),this.modalDisplayList=f,this.openSelectionModal()}else{const f=l[0]||"",M=this.productList.findIndex(w=>w.AWB_NO===this.billNo&&w.HAWB_NO===f&&!w.isScanned);if(-1===M)return void this.alert.toastAlert("warning","Item not matched");const I=this.productList[M]||{};if(I?.AWB_NO){if(I.Barcode=this.itemBarcode||"",this.isExistingItem(I.Barcode))return void this.alert.toastAlert("warning","Item already scanned");this.scannedList.push(I),this.productList[M].isScanned=!0,this.reset()}}}}isBarcodeValid(e,i){const n=e||"",o=i||"";if(!n||!o)return!1;if(-1!==o.indexOf(n))return!0;const r=n?.split("");let l=!0,T=o;return r.forEach(f=>{const M=T.indexOf(f);-1!==M?T=T?.substring(M+1):l=!1}),l}onDeleteScanItem(e,i){this.log.log("selected item : ",e,"index : ",i);const n=e?.Barcode||"",o=this.productList.find(r=>r.Barcode===n);o&&(o.isScanned=!1),this.refreshFilterList(),this.scannedList.splice(i,1)}openSelectionModal(){document.getElementById("matched-selection-open-modal")?.click()}onProductSelect(e){const i=e||{};i?.AWB_NO?(i.Barcode=this.itemBarcode||"",this.isExistingItem(i.Barcode)?this.alert.toastAlert("warning","Item already scanned"):(this.scannedList.push(i),null!=i.Index&&(this.productList[i.Index].isScanned=!0),this.closeSelectionModal(),this.reset())):this.log.log("Invalid item")}isExistingItem(e){return!!this.scannedList?.length&&!!this.scannedList.find(n=>n.Barcode===e)?.Barcode}closeSelectionModal(){document.getElementById("matched-selection-close-modal")?.click()}reset(){this.modalDisplayList=[],this.itemBarcode="",this.refreshFilterList(),this.log.log("product list : ",this.productList," filter list : ",this.filteredList)}refreshFilterList(){const e=this.productList.filter(i=>i.AWB_NO===this.billNo&&!i.isScanned).map(i=>i.HAWB_NO);if(!e?.length)return this.filteredList=[],void(this.billNo="");this.filteredList=e||[]}onSaveInward(){if(!this.scannedList?.length)return void this.alert.toastAlert("warning","Scan minimum one product to save");this.inwardLoader=!0;const e=[];this.scannedList.forEach(i=>{e.push({AWB_NO:i.AWB_NO,HAWB_NO:i.HAWB_NO,Barcode:i.Barcode,Inward_By:this.employeeCode})}),this.subscription.add(this.cargoApi.inwardCargoList(e).subscribe({next:i=>{this.log.log("save in ward list response : ",i),i&&this.alert.showMixinAlert("Data inward successfully !!!",null,"/cargo-inward");const n=setTimeout(()=>{this.inwardLoader=!1,clearTimeout(n)},1e3)},error:i=>{this.log.error(i,"manual-inward-scan","onSaveInward");const n=setTimeout(()=>{this.inwardLoader=!1,clearTimeout(n)},1e3)}}))}ngOnDestroy(){this.subscription?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(Z.F0),t.Y36(u.$),t.Y36(d.c),t.Y36(h.T),t.Y36(p),t.Y36(b.t))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-manual-inward-scan"]],decls:64,vars:14,consts:[[1,"breadcrumb-container"],[1,"breadcrumb-bar"],["aria-label","breadcrumb ",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb","mb-0"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"aside-container"],[1,"all-button","me-3",3,"click"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"document-main-container"],[1,"form-container"],[1,"row","justify-content-center","mt-5"],[1,"col-12","col-md-8"],[1,"input-field-group"],["type","text","placeholder","Scan bill no",1,"form-control",3,"ngModel","ngModelChange","keyup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-scan"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M4 7v-1a2 2 0 0 1 2 -2h2"],["d","M4 17v1a2 2 0 0 0 2 2h2"],["d","M16 4h2a2 2 0 0 1 2 2v1"],["d","M16 20h2a2 2 0 0 0 2 -2v-1"],["x1","5","y1","12","x2","19","y2","12"],["class","invalid-field-container",4,"ngIf"],["id","bill-no-scan-field","type","text","placeholder","Scan item here",1,"form-control",3,"ngModel","ngModelChange","keyup"],["class","row mt-5",4,"ngIf"],["id","inward-matched-selection-modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"ms-2",3,"innerHtml"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"text-center","w-100"],[1,"modal-table"],[4,"ngFor","ngForOf"],[1,"d-none"],["id","matched-selection-open-modal","data-bs-toggle","modal","data-bs-target","#inward-matched-selection-modal"],["id","matched-selection-close-modal","data-bs-target","#inward-matched-selection-modal","data-bs-dismiss","modal","aria-label","Close"],[1,"invalid-field-container"],[1,"text-danger",3,"innerHtml"],[1,"row","mt-5"],[1,"total-table-container"],[3,"innerHtml"],[1,"action-icon-button","delete-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-trash"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"],[1,"row-card",3,"click"],[1,"empty-row"],["colspan","4"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),t._uU(6,"Inward"),t.qZA()(),t.TgZ(7,"li",6),t._uU(8,"Scan"),t.qZA()()()(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return n.onSaveInward()}),t.TgZ(11,"span"),t._uU(12,"Save"),t.qZA(),t.TgZ(13,"div",9)(14,"span",10),t._uU(15,"Loading..."),t.qZA()()()()(),t.TgZ(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"input",16),t.NdJ("ngModelChange",function(r){return n.billNo=r})("keyup",function(r){return n.onBillNoScan(r,n.billNo)}),t.qZA(),t.O4$(),t.TgZ(22,"svg",17),t._UZ(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21)(27,"path",22)(28,"line",23),t.qZA()(),t.YNc(29,ut,2,1,"div",24),t.qZA()(),t.kcU(),t.TgZ(30,"div",13)(31,"div",14)(32,"div",15)(33,"input",25),t.NdJ("ngModelChange",function(r){return n.itemBarcode=r})("keyup",function(r){return n.onBarcodeScan(r,n.itemBarcode)}),t.qZA(),t.O4$(),t.TgZ(34,"svg",17),t._UZ(35,"path",18)(36,"path",19)(37,"path",20)(38,"path",21)(39,"path",22)(40,"line",23),t.qZA()(),t.YNc(41,pt,2,1,"div",24),t.qZA()(),t.YNc(42,mt,21,1,"div",26),t.qZA()(),t.kcU(),t.TgZ(43,"div",27)(44,"div",28)(45,"div",29)(46,"div",30)(47,"h5",31),t._uU(48," Airway Bill No "),t._UZ(49,"span",32),t.qZA(),t._UZ(50,"button",33),t.qZA(),t.TgZ(51,"div",34)(52,"div",35)(53,"div",36)(54,"h5",37),t._uU(55,"Select valid product"),t.qZA()(),t.TgZ(56,"div",36)(57,"div",38)(58,"table")(59,"tbody"),t.YNc(60,ht,12,4,"ng-container",39),t.qZA()()()()()()()()(),t.TgZ(61,"div",40),t._UZ(62,"button",41)(63,"button",42),t.qZA()),2&i&&(t.xp6(5),t.Q6J("routerLink","/cargo-inward"),t.xp6(5),t.ekj("loader",n.inwardLoader),t.xp6(10),t.ekj("invalid",n.invalidBillMessage),t.xp6(1),t.Q6J("ngModel",n.billNo),t.xp6(8),t.Q6J("ngIf",n.invalidBillMessage),t.xp6(3),t.ekj("invalid",n.invalidItemBarcodeMessage),t.xp6(1),t.Q6J("ngModel",n.itemBarcode),t.xp6(8),t.Q6J("ngIf",n.invalidItemBarcodeMessage),t.xp6(1),t.Q6J("ngIf",null==n.scannedList?null:n.scannedList.length),t.xp6(7),t.Q6J("innerHtml",n.billNo||"-",t.oJD),t.xp6(11),t.Q6J("ngForOf",n.modalDisplayList))},dependencies:[g.sg,g.O5,Z.rH,v.Fj,v.JJ,v.On],styles:[".input-field-group[_ngcontent-%COMP%]{display:flex;align-items:center;height:48px;margin:0 2rem;padding:0 1rem;box-shadow:0 2px 8px #22292f24;border-radius:.3rem}.input-field-group.invalid[_ngcontent-%COMP%]{box-shadow:0 0 4px 0 rgba(var(--bs-danger-rgb),.5)}.input-field-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none}.input-field-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.invalid-field-container[_ngcontent-%COMP%]{padding-top:.75rem;text-align:center}.modal-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.modal-table[_ngcontent-%COMP%]   .row-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #22292f24;border-radius:.25rem;cursor:pointer}.modal-table[_ngcontent-%COMP%]   .row-card[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem}.modal-table[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}"]})}return a})()},{path:"outward",component:J}]}];let _t=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[Z.Bz.forChild(ft),Z.Bz]})}return a})(),vt=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[g.ez,_t,v.u5,U.T]})}return a})()},3359:(q,L,m)=>{m.d(L,{n:()=>Z});var g=m(4946);let Z=(()=>{class t{constructor(){}getDataTableOptions(A,c,u){const h=u||"Data Export",_=A??!0;let b={};return b=c?{pagingType:"full_numbers",pageLength:10,retrieve:!0,destroy:!0,processing:!0,bAutoWidth:!1,autoFill:!0,order:[[_?1:0,"asc"]],columnDefs:[_?{targets:[0],visible:!1,orderable:!1}:{targets:[0],visible:!0,orderable:!0}],info:!0,lengthMenu:[[10,25,50,-1],["10 Records","25 Records","50 Records","Show all"]],language:{paginate:{previous:'<i class="fas fa-caret-left datatable-nav-icon"></i>',next:'<i class="fas fa-caret-right datatable-nav-icon"></i>',first:'<i class="fas fa-step-backward"></i>',last:'<i class="fas fa-step-forward"></i>'},buttons:{copyTitle:"",copyKeys:"",copySuccess:""}},oLanguage:{sLengthMenu:" _MENU_ ",sInfo:"Showing _START_ to _END_ of _TOTAL_ Records",sSearch:"",searchPlaceholder:"Search"},dom:"lBfrtip",buttons:[{extend:"collection",className:"collection-tool-button",text:"Export",autoClose:!0,collectionLayout:"filter-column-layout",buttons:[{extend:"excelHtml5",filename:h,title:"",exportOptions:{columns:":visible"}},{extend:"print",header:!0,exportOptions:{columns:":visible"}},{extend:"csvHtml5",filename:h,title:"",exportOptions:{columns:":visible"}},{extend:"copy",header:!0,exportOptions:{columns:":visible"}},{extend:"pdfHtml5",filename:h,title:"",exportOptions:{columns:":visible"},orientation:"landscape"},{extend:"colvis",text:"Filter Columns",columns:":not(.noVis)"}]}]}:{pagingType:"full_numbers",pageLength:10,processing:!0,bAutoWidth:!1,autoFill:!0,order:[[_?1:0,"asc"]],columnDefs:[_?{targets:[0],visible:!1,orderable:!1}:{targets:[0],visible:!0,orderable:!0}],lengthMenu:[[10,25,50,-1],["10 Records","25 Records","50 Records","Show all"]],language:{paginate:{previous:'<i class="fas fa-caret-left datatable-nav-icon"></i>',next:'<i class="fas fa-caret-right datatable-nav-icon"></i>',first:'<i class="fas fa-step-backward"></i>',last:'<i class="fas fa-step-forward"></i>'}},oLanguage:{sLengthMenu:" _MENU_ ",sInfo:"Showing _START_ to _END_ of _TOTAL_ Records",sSearch:"",searchPlaceholder:"Search"}},b}static#t=this.\u0275fac=function(c){return new(c||t)};static#e=this.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},627:(q,L,m)=>{m.d(L,{G:()=>t,T:()=>A});var g=m(4946),t=function(){function c(u,d,h){this.el=u,this.vcr=d,this.renderer=h,this.dtOptions={}}return c.prototype.ngOnInit=function(){var u=this;this.dtTrigger?this.dtTrigger.subscribe(function(d){u.displayTable(d)}):this.displayTable(null)},c.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},c.prototype.displayTable=function(u){var d=this;u&&(this.dtOptions=u),this.dtInstance=new Promise(function(h,_){Promise.resolve(d.dtOptions).then(function(p){0===Object.keys(p).length&&0===$("tbody tr",d.el.nativeElement).length?_("Both the table and dtOptions cannot be empty"):(p.columns&&p.columns.forEach(function(v){var x;""===(null!==(x=v.id)&&void 0!==x?x:"").trim()&&(v.id=d.getColumnUniqueId())}),setTimeout(function(){var v={rowCallback:function(x,C,O){if(p.columns){var y=p.columns;d.applyNgPipeTransform(x,y),d.applyNgRefTemplate(x,y,C)}p.rowCallback&&p.rowCallback(x,C,O)}};v=Object.assign({},p,v),d.dt=$(d.el.nativeElement).DataTable(v),h(d.dt)}))})})},c.prototype.applyNgPipeTransform=function(u,d){d.filter(function(_){return _.ngPipeInstance&&!_.ngTemplateRef}).forEach(function(_){var p=_.ngPipeInstance,b=_.ngPipeArgs||[],v=d.filter(function(y){return!1!==y.visible}).findIndex(function(y){return y.id===_.id}),x=u.childNodes.item(v),C=$(x).text(),O=p.transform.apply(p,function(c,u,d){if(d||2===arguments.length)for(var p,h=0,_=u.length;h<_;h++)(p||!(h in u))&&(p||(p=Array.prototype.slice.call(u,0,h)),p[h]=u[h]);return c.concat(p||Array.prototype.slice.call(u))}([C],b,!1));$(x).text(O)})},c.prototype.applyNgRefTemplate=function(u,d,h){var _=this;d.filter(function(b){return b.ngTemplateRef&&!b.ngPipeInstance}).forEach(function(b){var v,x=(v=b.ngTemplateRef).ref,C=v.context,O=d.filter(function(B){return!1!==B.visible}).findIndex(function(B){return B.id===b.id}),y=u.childNodes.item(O);$(y).html("");var J=Object.assign({},C,C?.userData,{adtData:h}),N=_.vcr.createEmbeddedView(x,J);_.renderer.appendChild(y,N.rootNodes[0])})},c.prototype.getColumnUniqueId=function(){for(var u="",h=0;h<6;h++){var _=Math.floor(62*Math.random());u+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(_)}return u.trim()},c.\u0275fac=function(d){return new(d||c)(g.Y36(g.SBq),g.Y36(g.s_b),g.Y36(g.Qsj))},c.\u0275dir=g.lG2({type:c,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),c}(),D=m(6814),A=function(){function c(){}return c.forRoot=function(){return{ngModule:c}},c.\u0275fac=function(d){return new(d||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[D.ez]}),c}()}}]);