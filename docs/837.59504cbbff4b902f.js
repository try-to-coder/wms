"use strict";(self.webpackChunkwms_wip_web=self.webpackChunkwms_wip_web||[]).push([[837],{837:(P,p,g)=>{g.r(p),g.d(p,{OrganizationModule:()=>I});var d=g(6814),c=g(2253),f=g(7394),_=g(2962),n=g(4946),M=g(2553),v=g(6593),z=g(6551),C=g(3251),O=g(8273);let b=(()=>{class i{constructor(t){this.apiHandler=t}getOrganization(t){return this.apiHandler.getRequest(`organization/${t}`,null,"organization-master :read")}updateOrganization(t,a){return delete a.Organization_Master_Id,this.apiHandler.putRequest(`organization/${t}`,a,"organization-master : update")}static#n=this.\u0275fac=function(a){return new(a||i)(n.LFG(O.k))};static#t=this.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var y=g(2307),s=g(6223);function Z(i,u){if(1&i&&(n.ynx(0),n._UZ(1,"img",48),n.BQk()),2&i){const t=n.oxw();n.xp6(1),n.Q6J("src",t.imageSrc,n.LSH)}}function T(i,u){1&i&&(n.ynx(0),n.O4$(),n.TgZ(1,"svg",49),n._UZ(2,"path",9)(3,"path",50)(4,"polyline",51)(5,"line",52),n.qZA(),n.kcU(),n.TgZ(6,"span",53),n._uU(7,"Drag and drop or click to upload"),n.qZA(),n.BQk())}function x(i,u){if(1&i){const t=n.EpF();n.TgZ(0,"div",54)(1,"a",55),n.NdJ("click",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.removeOrganizationLogo())}),n.O4$(),n.TgZ(2,"svg",56),n._UZ(3,"path",9)(4,"line",57)(5,"line",58)(6,"line",59)(7,"path",60)(8,"path",61),n.qZA()()()}}const m=function(i){return{"form-invalid-input":i}},A=[{path:"",component:(()=>{class i{constructor(t,a,e,r,o,h,l){this.route=t,this.log=a,this.sanitizer=e,this.credential=r,this.alert=o,this.organizationApi=h,this.validationService=l,this.organizationCode="",this.imageUpload=!1,this.organizationMaster={},this.result="",this.isOrgImageAvailable=!1,this.imageBase64="",this.validation={isInvalid:!1,isLoader:!1},this.subscription=new f.w0,this.onPreInit()}onPreInit(){}isRightsExisting(){return!0}ngOnInit(){this.isRightsExisting()?this.onPageReady():this.route.navigateByUrl(_.Q.unAuthorizedUrl)}onPageReady(){this.organizationCode=this.credential.getCredentialsData("Organization_Master_Id"),this.getOrganizationDetail()}getOrganizationDetail(){this.subscription.add(this.organizationApi.getOrganization(this.organizationCode).subscribe({next:t=>{this.log.log("organization update response : ",t),t&&(this.organizationMaster=t||{},this.setOrganizationDetail())},error:t=>{this.log.error(t,"organization","getOrganizationDetail")},complete:()=>{}}))}setOrganizationDetail(){const t=this.organizationMaster.Fiscal_Year_Start.split("-").reverse().join("-"),a=this.organizationMaster.Fiscal_Year_End.split("-").reverse().join("-"),e=this.organizationMaster.Inventory_Start_Date.split("-").reverse().join("-");this.organizationMaster.Inventory_Start_Date=e,this.organizationMaster.Fiscal_Year_Start=t,this.organizationMaster.Fiscal_Year_End=a,this.organizationMaster.Organization_Image?(this.isOrgImageAvailable=!0,this.imageSrc=this.sanitizer.bypassSecurityTrustUrl("data:image/jpeg;base64,"+this.organizationMaster.Organization_Image)):(this.isOrgImageAvailable=!1,this.log.log("emp image not available, setting default image"),this.imageSrc=null)}onLogoChange(t){if(t.target.files&&t.target.files[0])if(t.target.files[0].type&&"image"===t.target.files[0].type.split("/")[0])if(t.target.files[0].size<=1024e3){this.imageBase64="";const r=new FileReader;r.onload=o=>{this.log.log("events : ",o),this.imageSrc=o.target.result;const l=this.imageSrc.split(",");this.imageBase64=l.length>1?l[1]:"",this.isOrgImageAvailable=!0},r.readAsDataURL(t.target.files[0]),t.target.value=""}else t.target.value="",this.alert.toastAlert("error","Max image upload size is 1MB only");else t.target.value="",this.alert.toastAlert("error","Could not support selected image format. Choose valid image file ")}removeOrganizationLogo(){this.isOrgImageAvailable=!1,this.imageBase64="",this.organizationMaster.Organization_Image=""}navigateBack(){this.route.navigateByUrl("/home")}numberValidation(t,a,e){if(13!=t.keyCode)return this.validationService.customValidation(t,a,e,"^[0-9]+$")}updateOrganization(){if(this.validation.isInvalid=!1,this.validation.isLoader=!0,!(this.organizationMaster.Industry_Type&&this.organizationMaster.Organization_Name&&this.organizationMaster.Fiscal_Year_Start&&this.organizationMaster.Fiscal_Year_End&&this.organizationMaster.Time_Zone))return this.alert.toast("Enter mandatory fields !!!"),this.validation.isLoader=!1,void(this.validation.isInvalid=!0);this.imageBase64&&(this.organizationMaster.Organization_Image=this.imageBase64),this.subscription.add(this.organizationApi.updateOrganization(this.organizationCode,this.organizationMaster).subscribe({next:t=>{if(this.log.log("update response : ",t),t){this.alert.showMixinAlert("Organization updated successfully !!!"),this.organizationMaster=t||{},this.setOrganizationDetail();const a=setTimeout(()=>{this.validation.isLoader=!1,clearTimeout(a)},1e3)}},error:t=>{this.log.error(t,"organization","updateOrganization");const a=setTimeout(()=>{this.validation.isLoader=!1,clearTimeout(a)},1e3)}}))}static#n=this.\u0275fac=function(a){return new(a||i)(n.Y36(c.F0),n.Y36(M.$),n.Y36(v.H7),n.Y36(z.T),n.Y36(C.c),n.Y36(b),n.Y36(y.R))};static#t=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-organization"]],decls:97,vars:20,consts:[[1,"breadcrumb-container"],[1,"breadcrumb-bar"],["aria-label","breadcrumb ",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb","mb-0"],["aria-current","page",1,"breadcrumb-item"],[1,"d-flex","align-items-center","gap-2"],[1,"aside-container"],["type","button",1,"all-back-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","className","icon icon-tabler icon-tabler-arrow-back-up","width","24","height","24","viewBox","0 0 24 24","strokeWidth","2","stroke","currentColor","fill","none","strokeLinecap","round","strokeLinejoin","round"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M9 14l-4 -4l4 -4"],["d","M5 10h11a4 4 0 1 1 0 8h-1"],[1,"hover-text"],[1,"all-button","outline",3,"click"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"document-main-container"],[1,"form-container"],[1,"row"],[1,"col-md-4","form-group","form-field-group","image-choose-container"],["for","organization-image-file",1,"image-container-card"],[1,"image-container-image-card"],[4,"ngIf"],["data-validation-info","Enter the field",1,"form-input-field"],["type","file","accept","image/*","id","organization-image-file",1,"d-none",3,"change"],["class","image-remove-icon",4,"ngIf"],[1,"col-md-4"],[1,"form-group","form-field-group"],["for","org-cname"],[1,"required-field"],["data-validation-info","Enter the field",1,"form-input-field",3,"ngClass"],["type","text","name","org-cname","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["for","org-industry"],["type","text","name","org-industry","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["for","org-email"],["type","email","name","org-email","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["for","org-contact-email"],["type","email","name","org-contact-email","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["for","org-gst"],["type","text","name","org-gst","maxlength","30",1,"form-control",3,"ngModel","ngModelChange"],["for","org-pan"],["type","text","name","org-pan","maxlength","30",1,"form-control",3,"ngModel","ngModelChange"],["for","org-cperson"],["type","text","name","org-cperson","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["for","org-cin"],["type","text","name","org-cin","maxlength","30",1,"form-control",3,"ngModel","ngModelChange"],["for","org-website"],["type","text","name","website","maxlength","100",1,"form-control",3,"ngModel","ngModelChange"],["alt","Organization Image",3,"src"],["xmlns","http://www.w3.org/2000/svg","width","28","height","28","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-cloud-upload"],["d","M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"],["points","9 15 12 12 15 15"],["x1","12","y1","12","x2","12","y2","21"],[1,"d-block","w-100","text-center"],[1,"image-remove-icon"],[1,"d-block","text-danger",2,"cursor","pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-trash"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"]],template:function(a,e){1&a&&(n.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4),n._uU(5,"Organization"),n.qZA()()()(),n.TgZ(6,"div",5)(7,"div",6)(8,"button",7),n.NdJ("click",function(){return e.navigateBack()}),n.TgZ(9,"span"),n.O4$(),n.TgZ(10,"svg",8),n._UZ(11,"path",9)(12,"path",10)(13,"path",11),n.qZA()(),n.kcU(),n.TgZ(14,"span",12),n._uU(15,"Back"),n.qZA()()(),n.TgZ(16,"div",6)(17,"button",13),n.NdJ("click",function(){return e.updateOrganization()}),n.TgZ(18,"span"),n._uU(19,"Update"),n.qZA(),n.TgZ(20,"div",14)(21,"span",15),n._uU(22,"Loading..."),n.qZA()()()()()(),n.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"label",20)(28,"div",21),n.YNc(29,Z,2,1,"ng-container",22),n.YNc(30,T,8,0,"ng-container",22),n.qZA(),n.TgZ(31,"div",23)(32,"input",24),n.NdJ("change",function(o){return e.onLogoChange(o)}),n.qZA()()(),n.YNc(33,x,9,0,"div",25),n.qZA(),n.TgZ(34,"div",26)(35,"div",27)(36,"label",28)(37,"span"),n._uU(38,"Company Name"),n.qZA(),n.TgZ(39,"span",29),n._uU(40,"*"),n.qZA()(),n.TgZ(41,"div",30)(42,"input",31),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Organization_Name=o}),n.qZA()()(),n.TgZ(43,"div",27)(44,"label",32)(45,"span"),n._uU(46,"Industry Type"),n.qZA(),n.TgZ(47,"span",29),n._uU(48,"*"),n.qZA()(),n.TgZ(49,"div",30)(50,"input",33),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Industry_Type=o}),n.qZA()()(),n.TgZ(51,"div",27)(52,"label",34)(53,"span"),n._uU(54,"Emergency Mail ID"),n.qZA()(),n.TgZ(55,"div",23)(56,"input",35),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Emergency_Email=o}),n.qZA()()()(),n.TgZ(57,"div",26)(58,"div",27)(59,"label",36)(60,"span"),n._uU(61,"Contact Email"),n.qZA()(),n.TgZ(62,"div",23)(63,"input",37),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Contact_Email=o}),n.qZA()()(),n.TgZ(64,"div",27)(65,"label",38)(66,"span"),n._uU(67,"GST no "),n.qZA()(),n.TgZ(68,"div",23)(69,"input",39),n.NdJ("ngModelChange",function(o){return e.organizationMaster.TAX_UID_Number=o}),n.qZA()()(),n.TgZ(70,"div",27)(71,"label",40)(72,"span"),n._uU(73,"PAN no "),n.qZA()(),n.TgZ(74,"div",23)(75,"input",41),n.NdJ("ngModelChange",function(o){return e.organizationMaster.PAN_Number=o}),n.qZA()()()(),n.TgZ(76,"div",26)(77,"div",27)(78,"label",42)(79,"span"),n._uU(80,"Contact Person"),n.qZA()(),n.TgZ(81,"div",23)(82,"input",43),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Contact_Person=o}),n.qZA()()()(),n.TgZ(83,"div",26)(84,"div",27)(85,"label",44)(86,"span"),n._uU(87,"CIN"),n.qZA()(),n.TgZ(88,"div",23)(89,"input",45),n.NdJ("ngModelChange",function(o){return e.organizationMaster.CIN_Number=o}),n.qZA()()()(),n.TgZ(90,"div",26)(91,"div",27)(92,"label",46)(93,"span"),n._uU(94,"Website"),n.qZA()(),n.TgZ(95,"div",23)(96,"input",47),n.NdJ("ngModelChange",function(o){return e.organizationMaster.Website=o}),n.qZA()()()()()()()),2&a&&(n.xp6(17),n.ekj("loader",e.validation.isLoader),n.xp6(12),n.Q6J("ngIf",e.isOrgImageAvailable),n.xp6(1),n.Q6J("ngIf",!e.isOrgImageAvailable),n.xp6(3),n.Q6J("ngIf",e.isOrgImageAvailable),n.xp6(8),n.Q6J("ngClass",n.VKq(16,m,e.validation.isInvalid&&!e.organizationMaster.Organization_Name)),n.xp6(1),n.Q6J("ngModel",e.organizationMaster.Organization_Name),n.xp6(7),n.Q6J("ngClass",n.VKq(18,m,e.validation.isInvalid&&!e.organizationMaster.Industry_Type)),n.xp6(1),n.Q6J("ngModel",e.organizationMaster.Industry_Type),n.xp6(6),n.Q6J("ngModel",e.organizationMaster.Emergency_Email),n.xp6(7),n.Q6J("ngModel",e.organizationMaster.Contact_Email),n.xp6(6),n.Q6J("ngModel",e.organizationMaster.TAX_UID_Number),n.xp6(6),n.Q6J("ngModel",e.organizationMaster.PAN_Number),n.xp6(7),n.Q6J("ngModel",e.organizationMaster.Contact_Person),n.xp6(7),n.Q6J("ngModel",e.organizationMaster.CIN_Number),n.xp6(7),n.Q6J("ngModel",e.organizationMaster.Website))},dependencies:[d.mk,d.O5,s.Fj,s.JJ,s.nD,s.On],styles:[".image-choose-container[_ngcontent-%COMP%]{position:relative}.image-choose-container[_ngcontent-%COMP%]   .image-container-card[_ngcontent-%COMP%]{margin-top:1.5rem;display:block;overflow:hidden;transition:all 2s ease-in;border:2px dashed #ccc;border-radius:.25rem;width:100%;height:167px;cursor:pointer}.image-choose-container[_ngcontent-%COMP%]   .image-container-card[_ngcontent-%COMP%]   .image-container-image-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-wrap:wrap;align-content:center;justify-content:center}.image-choose-container[_ngcontent-%COMP%]   .image-container-card[_ngcontent-%COMP%]   .image-container-image-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:148px;max-width:100%}.image-choose-container[_ngcontent-%COMP%]   .image-remove-icon[_ngcontent-%COMP%]{display:none;bottom:10px;position:absolute;left:0;width:100%;text-align:center}.image-choose-container[_ngcontent-%COMP%]:hover   .image-remove-icon[_ngcontent-%COMP%]{display:block}.image-upload-container[_ngcontent-%COMP%]{position:relative;padding:1rem 0}.image-upload-container[_ngcontent-%COMP%]   .image-upload-box[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:4px;width:100%;height:180px;display:flex;flex-wrap:wrap;align-content:center;justify-content:center}.upload[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;height:180px}h4[_ngcontent-%COMP%]{color:#001c8e}.image-upload[_ngcontent-%COMP%]{position:relative}.image[_ngcontent-%COMP%]{position:absolute;width:370px;height:180px;top:23px;left:0}.validation[_ngcontent-%COMP%]{top:10px;right:10px}.input-error[_ngcontent-%COMP%]{border:2px solid red}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{appearance:none;display:none}input[type=file][_ngcontent-%COMP%]{color:transparent}@media only screen and (max-width: 768px){.btn-outline-warning[_ngcontent-%COMP%]{margin-bottom:10px}.financial-year[_ngcontent-%COMP%]{margin-bottom:30px}}"]})}return i})()}];let w=(()=>{class i{static#n=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=n.oAB({type:i});static#e=this.\u0275inj=n.cJS({imports:[c.Bz.forChild(A),c.Bz]})}return i})(),I=(()=>{class i{static#n=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=n.oAB({type:i});static#e=this.\u0275inj=n.cJS({imports:[d.ez,w,s.u5]})}return i})()}}]);